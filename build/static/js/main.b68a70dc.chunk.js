(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{24:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(18),o=n.n(a),s=(n(24),n(4)),i=n.n(s),u=n(9),l=n(7),j=n(11),p=n(1);function d(e){var t=e.history,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(""),d=Object(l.a)(s,2),h=d[0],b=d[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"login"}),Object(p.jsx)("input",{type:"text",placeholder:"username",onChange:function(e){o(e.target.value)}}),Object(p.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){b(e.target.value)}}),Object(p.jsx)("button",{onClick:Object(u.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/login",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({username:a,password:h})});case 3:return n=e.sent,console.log(n),e.next=7,n.json();case 7:r=e.sent,console.log(r),r.token&&(localStorage.token=r.token,t.push("/home")),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),children:"Login"}),Object(p.jsxs)("p",{children:["don't have an account yet? ",Object(p.jsx)(j.b,{to:"/register",children:"Register"})," page "]})]})}function h(e){var t=e.history,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)(""),d=Object(l.a)(s,2),h=d[0],b=d[1],x=Object(r.useState)(""),O=Object(l.a)(x,2),f=O[0],g=O[1],v=Object(r.useState)(""),m=Object(l.a)(v,2),y=m[0],k=m[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"register "}),Object(p.jsx)("input",{type:"text",placeholder:"username",onChange:function(e){o(e.target.value)}}),Object(p.jsx)("input",{type:"password",placeholder:"password",onChange:function(e){b(e.target.value)}}),Object(p.jsx)("input",{type:"text",placeholder:"first name",onChange:function(e){g(e.target.value)}}),Object(p.jsx)("input",{type:"text",placeholder:"last name",onChange:function(e){k(e.target.value)}}),Object(p.jsx)("button",{onClick:Object(u.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/register",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({username:a,password:h,fname:f,lname:y})});case 3:return n=e.sent,console.log(n),e.next=7,n.json();case 7:r=e.sent,console.log(r),r.id&&t.push("/login"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),children:"Register"}),Object(p.jsxs)("p",{children:["already have an account? ",Object(p.jsx)(j.b,{to:"/login",children:"Login"})," page "]})]})}function b(e){var t=e.item,n=e.delFromCart;return Object(p.jsxs)("div",{className:"cart-list-item",children:[Object(p.jsx)("img",{src:t.img,alt:"img"}),Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("h3",{children:t.name}),Object(p.jsx)("h2",{children:t.price}),Object(p.jsx)("button",{onClick:function(){return n(t.id)},children:"DELETE"})]})]})}function x(e){var t=e.cartArr,n=e.delFromCart;return Object(p.jsx)("div",{className:"cart-list",children:t.map((function(e,t){return Object(p.jsx)(b,{item:e,delFromCart:n},t)}))})}function O(e){var t=e.prod,n=e.addToCart;return Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{src:t.img,alt:"prod img",className:"prod-list-img"}),Object(p.jsxs)("h1",{children:[t.name,", $",t.price]}),Object(p.jsx)("button",{onClick:function(){return n(t.id)},children:"ADD TO CART"})]})}function f(e){var t=e.addToCart,n=Object(r.useState)([]),c=Object(l.a)(n,2),a=c[0],o=c[1];return Object(r.useEffect)((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/products");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.log(n),o(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsx)("div",{className:"prod-list",children:a.map((function(e){return Object(p.jsx)(O,{prod:e,addToCart:t},e.id)}))})}function g(e){var t=e.history,n=Object(r.useState)([]),c=Object(l.a)(n,2),a=c[0],o=c[1],s=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/cart",{method:"post",body:JSON.stringify({prodId:t}),headers:{"content-type":"application/json",authorization:localStorage.token}});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,o(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/cart",{method:"delete",body:JSON.stringify({prodId:t}),headers:{"content-type":"application/json",authorization:localStorage.token}});case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,o(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){localStorage.token||t.push("/login"),function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/cart",{method:"get",headers:{authorization:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.log(n),o(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("button",{onClick:function(){localStorage.removeItem("token"),t.push("/login")},children:"Logout"}),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(f,{addToCart:s}),Object(p.jsx)(x,{cartArr:a,delFromCart:j})]})]})}function v(){return Object(p.jsx)("div",{})}var m=n(2);function y(){return Object(p.jsx)(j.a,{children:Object(p.jsx)("div",{children:Object(p.jsxs)(m.d,{children:[Object(p.jsx)(m.b,{path:"/login",component:d}),Object(p.jsx)(m.b,{path:"/register",component:h}),Object(p.jsx)(m.b,{path:"/home",component:g}),Object(p.jsx)(m.b,{path:"/pay",component:v}),Object(p.jsx)(m.a,{exact:!0,from:"/",to:"/login"})]})})})}var k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,33)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(y,{})}),document.getElementById("root")),k()}},[[32,1,2]]]);
//# sourceMappingURL=main.b68a70dc.chunk.js.map